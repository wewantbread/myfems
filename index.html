<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sacred Element Cycle</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="xaza-bg" aria-hidden="true"></div>
  <canvas class="pixel-wave" aria-hidden="true"></canvas>
  <button class="theme-toggle" type="button" aria-label="Toggle between night and day">
    <span class="theme-toggle__icon theme-toggle__icon--sun" aria-hidden="true"></span>
    <span class="theme-toggle__icon theme-toggle__icon--moon" aria-hidden="true"></span>
  </button>
  <main class="stage" aria-label="Meditative elemental aura animation">
    <div class="lightshow" aria-hidden="true">
      <span class="lightshow__beam" aria-hidden="true"></span>
      <span class="lightshow__beam" aria-hidden="true"></span>
      <span class="lightshow__beam" aria-hidden="true"></span>
      <span class="lightshow__beam" aria-hidden="true"></span>
      <span class="lightshow__beam" aria-hidden="true"></span>
      <span class="lightshow__beam" aria-hidden="true"></span>
    </div>
    <div class="figure-wrapper">
      <div class="molecule-row" role="group" aria-label="Molecule collage">
        <div class="molecule-figure">
          <img class="molecule-figure__image" src="chakragirl.png" alt="Chakra girl molecule" />
        </div>
        <span class="molecule-plus" aria-hidden="true">+</span>
        <div class="figure" tabindex="0" role="img" aria-label="Human molecule">
          <img class="figure__image" src="humanmolecule.png" alt="Human molecule" />
        </div>
        <span class="molecule-plus" aria-hidden="true">+</span>
        <div class="molecule-figure">
          <img class="molecule-figure__image" src="thcmolecule.png" alt="THC molecule" />
        </div>
      </div>
    </div>
      <div class="shop-tag" aria-hidden="true">
        <span class="shop-tag__label">Shop</span>
      </div>
    </div>
  </main>
  <div class="time-panel" aria-live="polite" role="status"></div>
  <input
    class="xaza-hue-slider"
    type="range"
    min="0"
    max="360"
    step="0.1"
    value="0"
    aria-hidden="true"
    tabindex="-1"
  />
  <script>
    const body = document.body;
    const root = document.documentElement;

    const palettes = [
      {
        light: {
          "stage-haze": "radial-gradient(circle at 50% 45%, hsla(32 92% 88% / 0.75) 0%, hsla(18 82% 60% / 0.24) 52%, transparent 78%)",
          "leaf-color": "26 88% 58%",
          "outline-color": "18 86% 72%",
          "chakra-third-eye": "202 86% 58%",
          "image-shadow": "hsla(28 74% 54% / 0.26)",
          "image-lowlight": "hsla(24 34% 24% / 0.26)",
        },
        night: {
          "stage-haze": "radial-gradient(circle at 50% 46%, hsla(26 86% 58% / 0.25) 0%, hsla(18 78% 38% / 0.14) 44%, transparent 76%)",
          "leaf-color": "20 84% 64%",
          "outline-color": "28 88% 70%",
          "chakra-third-eye": "202 84% 62%",
          "image-shadow": "hsla(24 88% 64% / 0.34)",
          "image-lowlight": "hsla(18 62% 14% / 0.5)",
        },
      },
      {
        light: {
          "stage-haze": "radial-gradient(circle at 50% 45%, hsla(296 88% 90% / 0.74) 0%, hsla(278 74% 72% / 0.22) 54%, transparent 80%)",
          "leaf-color": "296 72% 70%",
          "outline-color": "284 84% 78%",
          "chakra-third-eye": "262 82% 64%",
          "image-shadow": "hsla(284 72% 66% / 0.28)",
          "image-lowlight": "hsla(282 34% 24% / 0.26)",
        },
        night: {
          "stage-haze": "radial-gradient(circle at 50% 46%, hsla(284 72% 58% / 0.24) 0%, hsla(268 68% 40% / 0.12) 45%, transparent 78%)",
          "leaf-color": "288 72% 68%",
          "outline-color": "284 82% 76%",
          "chakra-third-eye": "262 84% 64%",
          "image-shadow": "hsla(284 88% 66% / 0.36)",
          "image-lowlight": "hsla(276 64% 16% / 0.5)",
        },
      },
      {
        light: {
          "stage-haze": "radial-gradient(circle at 50% 45%, hsla(152 68% 88% / 0.74) 0%, hsla(162 56% 70% / 0.2) 55%, transparent 78%)",
          "leaf-color": "152 68% 54%",
          "outline-color": "164 74% 68%",
          "chakra-third-eye": "48 88% 56%",
          "image-shadow": "hsla(154 62% 52% / 0.26)",
          "image-lowlight": "hsla(150 32% 24% / 0.24)",
        },
        night: {
          "stage-haze": "radial-gradient(circle at 50% 46%, hsla(156 64% 52% / 0.24) 0%, hsla(170 44% 34% / 0.12) 46%, transparent 78%)",
          "leaf-color": "152 64% 60%",
          "outline-color": "158 70% 72%",
          "chakra-third-eye": "48 84% 58%",
          "image-shadow": "hsla(154 82% 60% / 0.34)",
          "image-lowlight": "hsla(150 48% 14% / 0.5)",
        },
      },
      {
        light: {
          "stage-haze": "radial-gradient(circle at 50% 45%, hsla(204 92% 90% / 0.72) 0%, hsla(188 74% 76% / 0.2) 55%, transparent 80%)",
          "leaf-color": "196 84% 64%",
          "outline-color": "188 86% 72%",
          "chakra-third-eye": "46 94% 58%",
          "image-shadow": "hsla(196 76% 62% / 0.28)",
          "image-lowlight": "hsla(188 36% 26% / 0.24)",
        },
        night: {
          "stage-haze": "radial-gradient(circle at 50% 46%, hsla(196 84% 60% / 0.24) 0%, hsla(188 72% 42% / 0.12) 46%, transparent 78%)",
          "leaf-color": "192 82% 66%",
          "outline-color": "186 84% 78%",
          "chakra-third-eye": "46 92% 60%",
          "image-shadow": "hsla(194 88% 70% / 0.34)",
          "image-lowlight": "hsla(186 58% 14% / 0.5)",
        },
      },
    ];

    const applyPaletteTokens = (mode, tokens) => {
      if (!tokens) return;
      Object.entries(tokens).forEach(([token, value]) => {
        root.style.setProperty(`--palette-${mode}-${token}`, value);
      });
    };

    const applyPalette = (palette) => {
      if (!palette) return;
      applyPaletteTokens("light", palette.light);
      applyPaletteTokens("night", palette.night);
    };

    if (palettes.length) {
      const choice = palettes[Math.floor(Math.random() * palettes.length)];
      applyPalette(choice);
    }

    const storedTheme = window.localStorage.getItem("chakra-theme");
    if (storedTheme === "night" || (!storedTheme && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
      body.dataset.theme = "night";
    }

    document.querySelector(".theme-toggle")?.addEventListener("click", () => {
      const isNight = body.dataset.theme === "night";
      const nextTheme = isNight ? "day" : "night";
      if (nextTheme === "night") {
        body.dataset.theme = "night";
      } else {
        delete body.dataset.theme;
      }
      window.localStorage.setItem("chakra-theme", nextTheme);
    });

    const figure = document.querySelector(".figure");
    const figureImage = document.querySelector(".figure__image");
    const timePanel = document.querySelector(".time-panel");
    const shopLabel = document.querySelector(".shop-tag__label");
    const lightshowBeams = Array.from(document.querySelectorAll(".lightshow__beam"));
    const hueSlider = document.querySelector(".xaza-hue-slider");
    const pixelWave = document.querySelector(".pixel-wave");
    const ambientParticles = Array.from(
      document.querySelectorAll(".aura--leaves .leaf")
    );

    const randomBetween = (min, max) => Math.random() * (max - min) + min;

    const applyAmbientTokens = (hues) => {
      if (!Array.isArray(hues) || !hues.length) return;
      const [primary, secondary, tertiary, quaternary] = hues;
      const build = (hue, saturationRange, lightRange, alpha = 0.7) => {
        const saturation = randomBetween(...saturationRange).toFixed(1);
        const lightness = randomBetween(...lightRange).toFixed(1);
        return `hsla(${hue.toFixed(1)} ${saturation}% ${lightness}% / ${alpha})`;
      };

      root.style.setProperty(
        "--ambient-color-1",
        `${primary.toFixed(1)} ${randomBetween(64, 82).toFixed(1)}% ${randomBetween(60, 78).toFixed(1)}%`
      );
      root.style.setProperty(
        "--ambient-color-2",
        `${secondary.toFixed(1)} ${randomBetween(60, 86).toFixed(1)}% ${randomBetween(58, 74).toFixed(1)}%`
      );
      root.style.setProperty(
        "--ambient-color-3",
        `${tertiary.toFixed(1)} ${randomBetween(58, 84).toFixed(1)}% ${randomBetween(55, 72).toFixed(1)}%`
      );
      root.style.setProperty(
        "--ambient-color-4",
        `${quaternary.toFixed(1)} ${randomBetween(56, 78).toFixed(1)}% ${randomBetween(48, 66).toFixed(1)}%`
      );

      const stageHaze = `radial-gradient(circle at 50% 45%, ${build(
        primary,
        [66, 86],
        [64, 84],
        0.64
      )} 0%, ${build(secondary, [60, 80], [54, 74], 0.32)} 55%, transparent 82%)`;
      root.style.setProperty("--ambient-stage-haze", stageHaze);
    };

    const applyBeamStyles = (hues) => {
      if (!lightshowBeams.length) return;
      const palette = hues.length ? hues : [Math.random() * 360];
      lightshowBeams.forEach((beam, index) => {
        const sourceHue = palette[index % palette.length];
        const hue = (sourceHue + randomBetween(-14, 14) + 360) % 360;
        const saturation = randomBetween(62, 88).toFixed(1);
        const lightness = randomBetween(58, 80).toFixed(1);
        beam.style.setProperty("--beam-hsl", `${hue.toFixed(1)} ${saturation}% ${lightness}%`);
        beam.style.setProperty("--beam-duration", `${randomBetween(16, 24).toFixed(1)}s`);
        beam.style.setProperty("--beam-delay", `${randomBetween(-8, 8).toFixed(1)}s`);
        beam.style.setProperty("--beam-x", `${randomBetween(20, 80).toFixed(1)}%`);
        beam.style.setProperty("--beam-y", `${randomBetween(18, 82).toFixed(1)}%`);
      });
    };

    const configureAmbientParticles = (hues) => {
      if (!ambientParticles.length) return;
      const palette = hues.length ? hues : [Math.random() * 360];
      ambientParticles.forEach((particle, index) => {
        const sourceHue = palette[index % palette.length];
        const hue = (sourceHue + randomBetween(-10, 18) + 360) % 360;
        const saturation = randomBetween(58, 82).toFixed(1);
        const lightness = randomBetween(58, 78).toFixed(1);
        particle.style.setProperty("--particle-hsl", `${hue.toFixed(1)} ${saturation}% ${lightness}%`);
        const duration = randomBetween(14, 22);
        particle.style.setProperty("--particle-duration", `${duration.toFixed(1)}s`);
        particle.style.setProperty("--particle-delay", `${(index * 0.65).toFixed(1)}s`);
        const startRadius = randomBetween(6, 22);
        const endRadius = startRadius + randomBetween(4, 18);
        const angle = randomBetween(0, Math.PI * 2);
        const driftAngle = angle + randomBetween(-0.9, 0.9);
        const midAngle = (angle + driftAngle) / 2;
        const midRadius = (startRadius + endRadius) / 2;
        particle.style.setProperty("--drift-start-x", `${Math.cos(angle) * startRadius}%`);
        particle.style.setProperty("--drift-start-y", `${Math.sin(angle) * startRadius}%`);
        particle.style.setProperty("--drift-mid-x", `${Math.cos(midAngle) * midRadius}%`);
        particle.style.setProperty("--drift-mid-y", `${Math.sin(midAngle) * midRadius}%`);
        particle.style.setProperty("--drift-end-x", `${Math.cos(driftAngle) * endRadius}%`);
        particle.style.setProperty("--drift-end-y", `${Math.sin(driftAngle) * endRadius}%`);
        particle.style.setProperty("--particle-scale", randomBetween(0.72, 1.3).toFixed(2));
      });
    };

    let ambientTimer;
    const refreshAmbientScene = () => {
      const base = randomBetween(0, 360);
      const hues = [
        base,
        (base + randomBetween(28, 76)) % 360,
        (base + randomBetween(96, 156)) % 360,
        (base + randomBetween(180, 240)) % 360,
      ];
      applyAmbientTokens(hues);
      applyBeamStyles(hues);
      configureAmbientParticles(hues);
    };

    const scheduleAmbientScene = () => {
      refreshAmbientScene();
      if (ambientTimer) {
        window.clearInterval(ambientTimer);
      }
      ambientTimer = window.setInterval(refreshAmbientScene, 16000);
    };

    const chakraSource = "humanmolecule.png";

    const imageManifest = [
      {
        src: chakraSource,
        alt: "Human molecule",
        label: "Human molecule pulsing with light",
      },
    ];

    const preloadImage = (entry) =>
      new Promise((resolve) => {
        const loader = new Image();
        loader.src = entry.src;
        loader.onload = () => resolve({ ...entry, available: true });
        loader.onerror = () => resolve({ ...entry, available: false });
      });

    const TRANSITION_DURATION = 2200;
    const TRANSITION_PROGRESS_RATIO = 0.45;
    const CYCLE_INTERVAL = 14000;

    let activeIndex = 0;
    let cycleTimer;
    let manifestItems = [];
    let isTransitioning = false;
    let pendingIndex = null;

    const setChakraState = (isActive) => {
      if (!figure) return;
      figure.classList.toggle("is-chakra-active", Boolean(isActive));
    };

    const updateFigureMeta = (entry) => {
      if (!figure || !figureImage) return;
      figureImage.alt = entry.alt;
      figure.setAttribute("aria-label", entry.label || entry.alt);
      figure.style.setProperty("--figure-mask", `url("${entry.src}")`);
      setChakraState(entry.src === chakraSource);
    };

    function swapImage(entry) {
      if (!figure || !figureImage) return;
      isTransitioning = true;
      figure.classList.add("is-transitioning");

      const finalize = () => {
        figure.classList.remove("is-transitioning");
        isTransitioning = false;
        if (pendingIndex !== null) {
          const queuedIndex = pendingIndex;
          pendingIndex = null;
          if (queuedIndex !== activeIndex) {
            window.requestAnimationFrame(() => advanceImage(queuedIndex));
          }
        }
      };

      const loader = new Image();
      loader.src = entry.src;
      loader.onload = () => {
        refreshAmbientScene();
        const swapDelay = TRANSITION_DURATION * TRANSITION_PROGRESS_RATIO;
        window.setTimeout(() => {
          figureImage.src = entry.src;
          updateFigureMeta(entry);
        }, swapDelay);
        window.setTimeout(finalize, TRANSITION_DURATION + 160);
      };
      loader.onerror = finalize;
    }

    function advanceImage(targetIndex) {
      if (!manifestItems.length) return;
      const nextIndex =
        typeof targetIndex === "number"
          ? (targetIndex + manifestItems.length) % manifestItems.length
          : (activeIndex + 1) % manifestItems.length;

      if (isTransitioning) {
        if (pendingIndex !== nextIndex) {
          pendingIndex = nextIndex;
        }
        return;
      }

      activeIndex = nextIndex;
      swapImage(manifestItems[nextIndex]);
    }

    const scheduleCycle = () => {
      if (cycleTimer) {
        window.clearInterval(cycleTimer);
      }
      if (manifestItems.length < 2) {
        return;
      }
      cycleTimer = window.setInterval(() => {
        advanceImage();
      }, CYCLE_INTERVAL);
    };

    const cycleImages = (manifest) => {
      manifestItems = manifest.slice();
      if (!manifestItems.length) return;

      activeIndex = 0;
      pendingIndex = null;
      isTransitioning = false;
      figureImage.src = manifestItems[0].src;
      updateFigureMeta(manifestItems[0]);

      scheduleCycle();
    };

    const handleAdvance = () => {
      if (!manifestItems.length) return;
      advanceImage();
      scheduleCycle();
    };

    const attachInteractionHandlers = () => {
      if (!figure) return;

      if ("PointerEvent" in window) {
        figure.addEventListener("pointerup", (event) => {
          if (event.pointerType === "mouse" && event.button !== 0) {
            return;
          }
          event.preventDefault();
          handleAdvance();
        });
      } else {
        let lastTouch = 0;
        figure.addEventListener("touchend", (event) => {
          lastTouch = Date.now();
          event.preventDefault();
          handleAdvance();
        });
        figure.addEventListener("click", (event) => {
          if (Date.now() - lastTouch < 400) {
            return;
          }
          handleAdvance();
        });
      }

      figure.addEventListener("keydown", (event) => {
        if (event.key === "Enter" || event.key === " " ) {
          event.preventDefault();
          handleAdvance();
        }
      });
    };

    refreshAmbientScene();
    attachInteractionHandlers();

    const setXazaHue = (value) => {
      const hue = Number.parseFloat(value);
      if (Number.isNaN(hue)) return;
      root.style.setProperty("--xaza-hue", `${hue}deg`);
    };

    const initializeHueSlider = () => {
      if (!hueSlider) return;
      const updateHueFromSlider = () => setXazaHue(hueSlider.value);
      hueSlider.addEventListener("input", updateHueFromSlider);
      updateHueFromSlider();

      const prefersReduced = window.matchMedia("(prefers-reduced-motion: reduce)");
      let hueTimer = null;

      const startHueLoop = () => {
        if (hueTimer) return;
        hueTimer = window.setInterval(() => {
          const nextValue = randomBetween(0, 360);
          hueSlider.value = nextValue.toFixed(1);
          updateHueFromSlider();
        }, 15000);
      };

      const stopHueLoop = () => {
        if (!hueTimer) return;
        window.clearInterval(hueTimer);
        hueTimer = null;
      };

      if (!prefersReduced.matches) {
        startHueLoop();
      }

      prefersReduced.addEventListener("change", (event) => {
        if (event.matches) {
          stopHueLoop();
        } else {
          startHueLoop();
        }
      });
    };

    initializeHueSlider();

    const initPixelWave = () => {
      if (!pixelWave) return;
      const context = pixelWave.getContext("2d");
      if (!context) return;

      const buffer = document.createElement("canvas");
      const bufferContext = buffer.getContext("2d");
      if (!bufferContext) return;

      const points = [];
      const trailLifetime = 1400;
      const spawnDelay = 40;
      const pixelScale = 10;
      let lastSpawn = 0;
      const pointer = {
        x: window.innerWidth * 0.5,
        y: window.innerHeight * 0.5,
        active: false,
      };

      const resize = () => {
        const { innerWidth, innerHeight, devicePixelRatio } = window;
        pixelWave.width = innerWidth * devicePixelRatio;
        pixelWave.height = innerHeight * devicePixelRatio;
        pixelWave.style.width = `${innerWidth}px`;
        pixelWave.style.height = `${innerHeight}px`;
        buffer.width = Math.ceil(innerWidth / pixelScale);
        buffer.height = Math.ceil(innerHeight / pixelScale);
        context.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
      };

      const addPoint = (x, y, time) => {
        points.push({ x, y, time });
      };

      const handlePointerMove = (event) => {
        pointer.x = event.clientX;
        pointer.y = event.clientY;
        pointer.active = true;
        const now = performance.now();
        if (now - lastSpawn >= spawnDelay) {
          addPoint(pointer.x, pointer.y, now);
          lastSpawn = now;
        }
      };

      const handlePointerLeave = () => {
        pointer.active = false;
      };

      const draw = (time) => {
        bufferContext.clearRect(0, 0, buffer.width, buffer.height);
        bufferContext.fillStyle = "rgba(255, 255, 255, 0.35)";
        const activePoints = [];

        points.forEach((point) => {
          const age = time - point.time;
          if (age > trailLifetime) {
            return;
          }
          const progress = age / trailLifetime;
          const wave = Math.sin(progress * Math.PI * 2) * 2.2;
          const size = 1.4 + progress * 2.6;
          const alpha = (1 - progress) * 0.45;
          const x = point.x / pixelScale;
          const y = (point.y + wave * pixelScale) / pixelScale;
          bufferContext.globalAlpha = alpha;
          bufferContext.fillRect(x - size / 2, y - size / 2, size, size);
          activePoints.push(point);
        });

        points.length = 0;
        points.push(...activePoints);

        if (pointer.active && time - lastSpawn >= spawnDelay) {
          addPoint(pointer.x, pointer.y, time);
          lastSpawn = time;
        }

        context.clearRect(0, 0, pixelWave.width, pixelWave.height);
        context.imageSmoothingEnabled = false;
        context.globalCompositeOperation = "screen";
        context.drawImage(
          buffer,
          0,
          0,
          buffer.width,
          buffer.height,
          0,
          0,
          window.innerWidth,
          window.innerHeight
        );
        context.globalCompositeOperation = "source-over";
        window.requestAnimationFrame(draw);
      };

      resize();
      window.addEventListener("resize", resize);
      window.addEventListener("pointermove", handlePointerMove);
      window.addEventListener("pointerdown", handlePointerMove);
      window.addEventListener("pointerleave", handlePointerLeave);
      window.addEventListener("blur", handlePointerLeave);
      window.requestAnimationFrame(draw);
    };

    initPixelWave();

    Promise.all(imageManifest.map(preloadImage)).then((results) => {
      const available = results.filter((item) => item.available);
      if (!available.length) return;
      cycleImages(available);
    });

    const scrambleGlyphs = [
      "卍",
      "光",
      "心",
      "灵",
      "魂",
      "神",
      "愛",
      "氣",
      "風",
      "水",
      "火",
      "Ω",
      "Ψ",
      "Δ",
      "Σ",
      "Ж",
      "Ф",
      "Я",
      "अ",
      "आ",
      "इ",
      "ई",
      "उ",
      "ऊ",
      "ॐ",
      "ཨ",
      "ག",
      "ད",
      "ན",
      "ᚠ",
      "ᚢ",
      "ᚦ",
      "ᚨ",
      "ᛃ",
      "ሀ",
      "ለ",
      "ሐ",
      "め",
      "ら",
      "ん",
      "す",
      "星",
      "龍",
      "月",
      "陽",
      "☯",
      "✺",
      "✧",
      "✦",
      "✴",
      "✶",
      "✽",
      "❂",
      "★",
      "✵",
      "卄"
    ];

    const formatDateTime = () => {
      const now = new Date();
      return now.toLocaleString(undefined, {
        weekday: "short",
        month: "short",
        day: "2-digit",
        year: "numeric",
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit",
        hour12: false,
        timeZoneName: "short",
      });
    };

    const scrambleText = (element, finalText, duration = 4000, interval = 60) => {
      if (!element) return;
      const structure = finalText.split("").map((char) => (/^[\s,.:/-]$/.test(char) ? char : null));

      const render = () => {
        let display = "";
        for (let i = 0; i < finalText.length; i += 1) {
          const preserved = structure[i];
          if (preserved) {
            display += preserved;
          } else {
            const glyph = scrambleGlyphs[Math.floor(Math.random() * scrambleGlyphs.length)];
            display += glyph;
          }
        }
        element.textContent = display;
      };

      render();
      const timer = window.setInterval(render, interval);
      window.setTimeout(() => {
        window.clearInterval(timer);
        element.textContent = finalText;
      }, duration);
    };

    const shopTranslations = [
      "Shop",
      "Boutique",
      "Magasin",
      "Tienda",
      "Mercado",
      "Loja",
      "Negozio",
      "Butik",
      "Kauppa",
      "Sklep",
      "商店",
      "お店",
      "상점",
      "магазин",
      "दुकान",
      "مَتْجَر",
      "ร้านค้า",
      "שׁוּק",
      "Butiik",
      "Market"
    ];

    const scrambleShopLabel = (element, duration = 4000, interval = 260) => {
      if (!element) return;
      const update = () => {
        const choice = shopTranslations[Math.floor(Math.random() * shopTranslations.length)];
        element.textContent = choice;
      };

      update();
      const timer = window.setInterval(update, interval);
      window.setTimeout(() => {
        window.clearInterval(timer);
        element.textContent = "Shop";
      }, duration);
    };

    const updateClock = () => {
      if (!timePanel) return;
      timePanel.textContent = formatDateTime();
    };

    const initializeClock = () => {
      if (!timePanel) return;
      const initial = formatDateTime();
      scrambleText(timePanel, initial, 4000);
      window.setTimeout(() => {
        updateClock();
        window.setInterval(updateClock, 1000);
      }, 4000);
    };

    scrambleShopLabel(shopLabel);
    initializeClock();
  </script>
</body>
</html>	
