:root {
  --cycle-duration: 20s;
  --ambient-color-1: 0 0% 92%;
  --ambient-color-2: 0 0% 76%;
  --ambient-color-3: 0 0% 58%;
  --ambient-color-4: 0 0% 38%;

  --figure-aura-stop-1: #7f7979;
  --figure-aura-stop-2: #755b69;
  --figure-aura-stop-3: #95a78d;
  --figure-aura-stop-4: #b49c7a;
  --figure-aura-stop-5: #8c725c;
  --figure-aura-stop-6: #cabb9c;
  --figure-aura-scale: 1.9;
  --figure-aura-duration: 14s;
  --figure-aura-invert: 1;
  --figure-aura-blend: screen;

  --palette-light-bg-gradient: radial-gradient(
    circle at 50% 38%,
    hsl(0 0% 100%) 0%,
    hsl(0 0% 96%) 32%,
    hsl(0 0% 88%) 68%,
    hsl(0 0% 82%) 100%
  );
  --palette-light-focus-glow: radial-gradient(
    circle at 50% 48%,
    hsla(0 0% 100% / 0.6) 0%,
    transparent 55%
  );
  --palette-light-toggle-bg: hsla(0 0% 100% / 0.55);
  --palette-light-toggle-border: hsla(0 0% 18% / 0.18);
  --palette-light-toggle-icon: hsl(0 0% 18%);
  --palette-light-toggle-icon-night: hsl(0 0% 32%);
  --palette-light-text-color: hsl(0 0% 14%);
  --palette-light-stage-haze: radial-gradient(
    circle at 50% 45%,
    hsla(0 0% 92% / 0.72) 0%,
    hsla(0 0% 72% / 0.18) 55%,
    transparent 78%
  );
  --palette-light-panel-bg: hsla(0 0% 100% / 0.72);
  --palette-light-panel-color: hsla(0 0% 16% / 0.9);
  --palette-light-panel-shadow: 0 1.6rem 3.5rem hsla(0 0% 12% / 0.18);
  --palette-light-shop-tag-bg: hsla(0 0% 100% / 0.58);
  --palette-light-shop-tag-color: hsla(0 0% 18% / 0.92);
  --palette-light-shop-tag-underline: linear-gradient(
    90deg,
    hsla(0 0% 42% / 0.3),
    hsla(0 0% 42% / 0.9),
    hsla(0 0% 42% / 0.3)
  );
  --palette-light-shop-tag-glow: hsla(0 0% 54% / 0.35);
  --palette-light-image-shadow: hsla(0 0% 0% / 0.24);
  --palette-light-image-lowlight: hsla(0 0% 0% / 0.22);
  --palette-light-leaf-color: 0 0% 70%;
  --palette-light-outline-color: 0 0% 72%;
  --palette-light-chakra-third-eye: 0 76% 52%;
  --palette-light-accent-focus: hsla(0 0% 24% / 0.48);
  --palette-light-accent-focus-soft: hsla(0 0% 24% / 0.16);

  --palette-night-bg-gradient: radial-gradient(
    circle at 50% 42%,
    hsl(0 0% 16%) 0%,
    hsl(0 0% 10%) 50%,
    hsl(0 0% 4%) 100%
  );
  --palette-night-focus-glow: radial-gradient(
    circle at 50% 46%,
    hsla(0 0% 100% / 0.18) 0%,
    transparent 70%
  );
  --palette-night-toggle-bg: hsla(0 0% 16% / 0.7);
  --palette-night-toggle-border: hsla(0 0% 70% / 0.25);
  --palette-night-toggle-icon: hsl(0 0% 82%);
  --palette-night-toggle-icon-night: hsl(0 0% 94%);
  --palette-night-text-color: hsl(0 0% 92%);
  --palette-night-stage-haze: radial-gradient(
    circle at 50% 46%,
    hsla(0 0% 68% / 0.24) 0%,
    hsla(0 0% 36% / 0.12) 45%,
    transparent 78%
  );
  --palette-night-panel-bg: hsla(0 0% 10% / 0.7);
  --palette-night-panel-color: hsla(0 0% 86% / 0.94);
  --palette-night-panel-shadow: 0 1.5rem 3.2rem hsla(0 0% 0% / 0.25);
  --palette-night-shop-tag-bg: hsla(0 0% 16% / 0.6);
  --palette-night-shop-tag-color: hsla(0 0% 92% / 0.92);
  --palette-night-shop-tag-underline: linear-gradient(
    90deg,
    hsla(0 0% 68% / 0.2),
    hsla(0 0% 68% / 0.6),
    hsla(0 0% 68% / 0.2)
  );
  --palette-night-shop-tag-glow: hsla(0 0% 72% / 0.28);
  --palette-night-image-shadow: hsla(0 0% 100% / 0.36);
  --palette-night-image-lowlight: hsla(0 0% 0% / 0.58);
  --palette-night-leaf-color: 0 0% 58%;
  --palette-night-outline-color: 0 0% 82%;
  --palette-night-chakra-third-eye: 0 74% 50%;
  --palette-night-accent-focus: hsla(0 0% 72% / 0.45);
  --palette-night-accent-focus-soft: hsla(0 0% 72% / 0.18);
:root {
  --bg-gradient: var(--palette-light-bg-gradient);
  --focus-glow: var(--palette-light-focus-glow);
  --toggle-bg: var(--palette-light-toggle-bg);
  --toggle-border: var(--palette-light-toggle-border);
  --toggle-icon: var(--palette-light-toggle-icon);
  --toggle-icon-night: var(--palette-light-toggle-icon-night);
  --text-color: var(--palette-light-text-color);
  --stage-haze: var(--palette-light-stage-haze);
  --panel-bg: var(--palette-light-panel-bg);
  --panel-color: var(--palette-light-panel-color);
  --panel-shadow: var(--palette-light-panel-shadow);
  --shop-tag-bg: var(--palette-light-shop-tag-bg);
  --shop-tag-color: var(--palette-light-shop-tag-color);
  --shop-tag-underline: var(--palette-light-shop-tag-underline);
  --shop-tag-glow: var(--palette-light-shop-tag-glow);
  --image-shadow: var(--palette-light-image-shadow);
  --image-lowlight: var(--palette-light-image-lowlight);
  --leaf-color: var(--palette-light-leaf-color);
  --outline-color: var(--palette-light-outline-color);
  --chakra-third-eye: var(--palette-light-chakra-third-eye);
  --accent-focus: var(--palette-light-accent-focus);
  --accent-focus-soft: var(--palette-light-accent-focus-soft);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  position: relative;
  min-height: 100vh;
  color-scheme: light;
  color: var(--text-color);
  background: var(--bg-gradient);
  background-size: 8000px 8000px;
  background-repeat: no-repeat;
  background-position: center;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: "Inter", "Helvetica Neue", system-ui, -apple-system, sans-serif;
  overflow: hidden;
  transition: background 1.6s ease, color 90s ease;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  background: var(--focus-glow);
  background-size: 8000px 8000px;
  background-repeat: no-repeat;
  background-position: center;
  pointer-events: none;
  mix-blend-mode: screen;
  opacity: 0.85;
  transition: opacity 0.6s ease, background 0.6s ease;
  -webkit-mask-image: radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.98) 68%, transparent 100%);
  mask-image: radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.98) 68%, transparent 100%);
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(circle at 20% 18%, hsla(var(--ambient-color-1) / 0.28) 0%, transparent 60%),
    radial-gradient(circle at 78% 28%, hsla(var(--ambient-color-2) / 0.22) 0%, transparent 66%),
    radial-gradient(circle at 50% 82%, hsla(var(--ambient-color-3) / 0.18) 0%, transparent 70%);
  background-size: 8000px 8000px;
  background-repeat: no-repeat;
  background-position: center;
  mix-blend-mode: screen;
  opacity: 0.28;
  filter: saturate(0.9) blur(2px);
  transition: opacity 0.6s ease, background 0.6s ease, mix-blend-mode 0.6s ease;
  z-index: 0;
  -webkit-mask-image: radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.92) 70%, transparent 100%);
  mask-image: radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.92) 70%, transparent 100%);
}

body[data-theme="night"] {
  color-scheme: dark;
  --figure-aura-invert: 0;
  --figure-aura-blend: color-dodge;
  --bg-gradient: var(--palette-night-bg-gradient, var(--palette-light-bg-gradient));
  --focus-glow: var(--palette-night-focus-glow, var(--palette-light-focus-glow));
  --toggle-bg: var(--palette-night-toggle-bg, var(--palette-light-toggle-bg));
  --toggle-border: var(--palette-night-toggle-border, var(--palette-light-toggle-border));
  --toggle-icon: var(--palette-night-toggle-icon, var(--palette-light-toggle-icon));
  --toggle-icon-night: var(--palette-night-toggle-icon-night, var(--palette-light-toggle-icon-night));
  --text-color: var(--palette-night-text-color, var(--palette-light-text-color));
  --stage-haze: var(--palette-night-stage-haze, var(--palette-light-stage-haze));
  --panel-bg: var(--palette-night-panel-bg, var(--palette-light-panel-bg));
  --panel-color: var(--palette-night-panel-color, var(--palette-light-panel-color));
  --panel-shadow: var(--palette-night-panel-shadow, var(--palette-light-panel-shadow));
  --shop-tag-bg: var(--palette-night-shop-tag-bg, var(--palette-light-shop-tag-bg));
  --shop-tag-color: var(--palette-night-shop-tag-color, var(--palette-light-shop-tag-color));
  --shop-tag-underline: var(--palette-night-shop-tag-underline, var(--palette-light-shop-tag-underline));
  --shop-tag-glow: var(--palette-night-shop-tag-glow, var(--palette-light-shop-tag-glow));
  --image-shadow: var(--palette-night-image-shadow, var(--palette-light-image-shadow));
  --image-lowlight: var(--palette-night-image-lowlight, var(--palette-light-image-lowlight));
  --leaf-color: var(--palette-night-leaf-color, var(--palette-light-leaf-color));
  --outline-color: var(--palette-night-outline-color, var(--palette-light-outline-color));
  --chakra-third-eye: var(--palette-night-chakra-third-eye, var(--palette-light-chakra-third-eye));
  --accent-focus: var(--palette-night-accent-focus, var(--palette-light-accent-focus));
  --accent-focus-soft: var(--palette-night-accent-focus-soft, var(--palette-light-accent-focus-soft));
}

body[data-theme="night"]::before {
  opacity: 0.5;
  mix-blend-mode: screen;
}

body[data-theme="night"]::after {
  opacity: 0.6;
  mix-blend-mode: screen;
  filter: saturate(0.85) blur(3px);
}

.figure::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: calc(100% * var(--figure-aura-scale, 1.9));
  aspect-ratio: 1 / 1;
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(0.92);
  background: conic-gradient(
    from 120deg at 50% 50%,
    var(--figure-aura-stop-1) 0deg,
    var(--figure-aura-stop-2) 110deg,
    var(--figure-aura-stop-3) 180deg,
    var(--figure-aura-stop-4) 240deg,
    var(--figure-aura-stop-5) 300deg,
    var(--figure-aura-stop-6) 360deg
  );
  background-size: 8000px 8000px;
  background-repeat: no-repeat;
  background-position: center;
  filter: blur(30px) saturate(1.14) brightness(1.06) invert(var(--figure-aura-invert, 0));
  opacity: 0.7;
  pointer-events: none;
  mix-blend-mode: var(--figure-aura-blend, screen);
  z-index: 1;
  animation: figure-aura-breathe var(--figure-aura-duration, 14s) ease-in-out infinite;
  transition: filter 0.8s ease, opacity 0.8s ease;
}

body[data-theme="night"] .figure::before {
  opacity: 0.84;
  filter: blur(36px) saturate(1.22) brightness(1.1) invert(var(--figure-aura-invert, 0));
}

.lightshow {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
  z-index: 0;
  mix-blend-mode: screen;
  filter: saturate(0.85) brightness(1.05);
}

.lightshow__beam {
  position: absolute;
  top: var(--beam-y, 50%);
  left: var(--beam-x, 50%);
  width: 65vmax;
  height: 65vmax;
  transform: translate(-50%, -50%) scale(0.82);
  border-radius: 50%;
  background: radial-gradient(
    circle at 50% 50%,
    hsla(var(--beam-hsl, var(--ambient-color-1)) / 0.78) 0%,
    hsla(var(--beam-hsl, var(--ambient-color-1)) / 0.05) 72%
  );
  filter: blur(48px);
  opacity: 0;
  -webkit-mask-image: radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.98) 62%, transparent 96%);
  mask-image: radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.98) 62%, transparent 96%);
  animation: beam-breathe var(--beam-duration, 18s) ease-in-out infinite;
  animation-delay: var(--beam-delay, 0s);
}

.lightshow__beam:nth-of-type(odd) {
  mix-blend-mode: color-dodge;
}

.lightshow__beam:nth-of-type(even) {
  mix-blend-mode: screen;
}

.theme-toggle {
  position: fixed;
  top: 2.4rem;
  right: 2.4rem;
  width: 3rem;
  height: 3rem;
  border: 1px solid var(--toggle-border);
  border-radius: 999px;
  background: var(--toggle-bg);
  backdrop-filter: blur(8px);
  display: grid;
  place-items: center;
  cursor: pointer;
  transition: border-color 0.3s ease, background 0.3s ease, transform 0.3s ease;
  z-index: 3;
}

.theme-toggle:hover,
.theme-toggle:focus-visible {
  transform: scale(1.05);
  border-color: var(--accent-focus);
  outline: none;
  box-shadow: 0 0 0 0.25rem var(--accent-focus-soft);
}

.theme-toggle__icon {
  width: 1.6rem;
  height: 1.6rem;
  border-radius: 50%;
  position: absolute;
  transition: opacity 0.4s ease, transform 0.4s ease;
}

.theme-toggle__icon--sun {
  background: radial-gradient(circle at center, var(--toggle-icon) 0%, hsl(46 98% 70%) 45%, hsla(46 100% 80% / 0.4) 100%);
  box-shadow: 0 0 0.5rem hsla(46 98% 60% / 0.5), 0 0 1.2rem hsla(46 98% 55% / 0.35);
  opacity: 1;
}

.theme-toggle__icon--sun::after {
  content: "";
  position: absolute;
  inset: -0.45rem;
  border-radius: 50%;
  background: radial-gradient(circle at center, hsla(46 96% 65% / 0.35) 0%, transparent 70%);
  filter: blur(1px);
  opacity: 0.75;
}

.theme-toggle__icon--moon {
  background: radial-gradient(circle at 65% 35%, var(--toggle-icon-night) 0%, hsl(230 40% 40%) 85%);
  box-shadow: inset -0.25rem -0.2rem 0.55rem hsla(210 60% 90% / 0.28);
  transform: translateY(0.5rem) scale(0.6);
  opacity: 0;
}

.theme-toggle__icon--moon::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 50%;
  box-shadow: -0.6rem 0 0 0 hsla(230 72% 20% / 0.65);
  transform: translateX(0.25rem);
}

body[data-theme="night"] .theme-toggle__icon--sun {
  opacity: 0;
  transform: translateY(-0.5rem) scale(0.6);
}

body[data-theme="night"] .theme-toggle__icon--moon {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.stage {
  width: 100vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 5vmin;
  position: relative;
  isolation: isolate;
  z-index: 1;
}

.stage::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: clamp(18rem, 52vmin, 38rem);
  aspect-ratio: 1;
  border-radius: 50%;
  background: var(--ambient-stage-haze, var(--stage-haze));
  background-size: 8000px 8000px;
  background-repeat: no-repeat;
  background-position: center;
  filter: blur(42px);
  opacity: 0.72;
  mix-blend-mode: screen;
  z-index: 0;
  transform: translate(-50%, -50%);
  transition: opacity 0.6s ease, background 0.6s ease, transform 0.6s ease;
}

body[data-theme="night"] .stage::before {
  opacity: 0.76;
  mix-blend-mode: screen;
  transform: translate(-50%, -50%);
}

.stage::after {
  content: "";
  position: absolute;
  top: 48%;
  left: 50%;
  width: clamp(22rem, 64vmin, 46rem);
  aspect-ratio: 1;
  border-radius: 50%;
  background:
    radial-gradient(circle at 44% 38%, hsla(var(--ambient-color-4) / 0.4) 0%, transparent 56%),
    radial-gradient(circle at 66% 64%, hsla(var(--ambient-color-2) / 0.28) 0%, transparent 68%);
  background-size: 8000px 8000px;
  background-repeat: no-repeat;
  background-position: center;
  mix-blend-mode: screen;
  filter: blur(52px) saturate(1.1);
  opacity: 0.48;
  transform: translate(-50%, -48%) scale(1.1);
  transition: opacity 0.6s ease, background 0.6s ease, transform 0.6s ease;
  animation: stage-contrast-breathe 20s ease-in-out infinite;
  z-index: 0;
}

body[data-theme="night"] .stage::after {
  opacity: 0.6;
  mix-blend-mode: color-dodge;
  transform: translate(-50%, -48%) scale(1.16);
}

.figure-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: clamp(0.6rem, 1.4vmin, 1.1rem);
  position: relative;
  z-index: 2;
  padding-bottom: clamp(2.8rem, 7vmin, 4.6rem);
  min-height: clamp(22rem, 58vmin, 32rem);
}

.figure {
  position: relative;
  width: min(22vmin, 180px);
  max-width: 180px;
  aspect-ratio: 3 / 4;
  display: grid;
  place-items: center;
  cursor: pointer;
  touch-action: manipulation;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  --figure-mask: url("chakragirl.png");
  --active-outline-color: var(--outline-color);
  --figure-raise: -2%;
  transform: translateY(var(--figure-raise));
  transition: transform 1.8s ease;
}

.figure.is-transitioning {
  transform: translateY(var(--figure-raise)) scale(0.99);
}

.figure__image {
  position: relative;
  z-index: 3;
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
  image-rendering: auto;
  transition: opacity 1.6s ease-in-out, transform 1.6s ease-in-out;
  filter: drop-shadow(0 0 1rem var(--image-lowlight))
    drop-shadow(0 0 2.6rem var(--image-shadow));
}

.figure.is-transitioning .figure__image {
  opacity: 0.7;
  transform: scale(0.985);
}

body[data-theme="night"] .figure__image {
  filter: drop-shadow(0 0 1.1rem var(--image-lowlight))
    drop-shadow(0 0 3.2rem var(--image-shadow));
}

.shop-tag {
  position: absolute;
  top: calc(100% + clamp(0.8rem, 1.8vmin, 1.4rem));
  left: 50%;
  transform: translateX(-50%);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.32rem 0.82rem 0.74rem;
  border-radius: 999px;
  background: var(--shop-tag-bg);
  backdrop-filter: blur(8px);
  text-transform: uppercase;
  letter-spacing: 0.32em;
  font-size: clamp(0.68rem, 1.05vmin, 0.78rem);
  color: var(--shop-tag-color);
  isolation: isolate;
  width: clamp(7.5rem, 18vmin, 10.5rem);
  text-align: center;
  white-space: nowrap;
  pointer-events: none;
}

.shop-tag__label {
  position: relative;
  z-index: 1;
}

.shop-tag::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: 0.28rem;
  width: 118%;
  height: 2px;
  transform: translateX(-50%);
  background: var(--shop-tag-underline);
  border-radius: 999px;
  box-shadow: 0 0 0.55rem var(--shop-tag-glow);
}

.time-panel {
  position: fixed;
  right: clamp(1.2rem, 3.8vw, 2rem);
  bottom: clamp(1rem, 3.6vw, 2rem);
  padding: 0.56rem 0.88rem;
  min-width: 15ch;
  border-radius: 0.78rem;
  font-size: clamp(0.68rem, 1.2vmin, 0.82rem);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--panel-color);
  background: var(--panel-bg);
  backdrop-filter: blur(10px);
  box-shadow: var(--panel-shadow);
  overflow: hidden;
  white-space: nowrap;
}

.figure__outline {
  position: absolute;
  inset: -12%;
  pointer-events: none;
  z-index: 2;
  background: radial-gradient(
      circle at 50% calc(50% + var(--outline-focus, 0%)),
      hsla(var(--active-outline-color) / 0.08) 0%,
      hsla(var(--active-outline-color) / 0.24) 36%,
      hsla(var(--active-outline-color) / 0.65) 64%,
      hsla(var(--active-outline-color) / 0.18) 84%,
      hsla(var(--active-outline-color) / 0) 100%
    );
  -webkit-mask: var(--figure-mask) center / contain no-repeat;
  mask: var(--figure-mask) center / contain no-repeat;
  filter:
    blur(18px)
    drop-shadow(0 0 3.2rem hsla(var(--active-outline-color) / 0.55))
    drop-shadow(0 0 5.5rem hsla(var(--active-outline-color) / 0.32));
  mix-blend-mode: screen;
  opacity: 0.68;
  visibility: visible;
  transition: opacity 0.8s ease, visibility 0.8s ease, filter 0.8s ease, background 0.8s ease;
  animation: outline-breath 6.6s ease-in-out infinite;
}

.figure__outline--primary {
  --outline-focus: 12%;
  z-index: 2;
  filter:
    blur(16px)
    drop-shadow(0 0 3.6rem hsla(var(--active-outline-color) / 0.48))
    drop-shadow(0 0 6.2rem hsla(var(--active-outline-color) / 0.28));
}

.figure__outline--secondary {
  --outline-focus: 16%;
  background: radial-gradient(
      circle at 50% calc(50% + var(--outline-focus, 0%)),
      hsla(var(--active-outline-color) / 0.05) 0%,
      hsla(var(--active-outline-color) / 0.18) 42%,
      hsla(var(--active-outline-color) / 0.5) 74%,
      hsla(var(--active-outline-color) / 0) 100%
    );
  filter:
    blur(26px)
    drop-shadow(0 0 3.8rem hsla(var(--active-outline-color) / 0.45));
  opacity: 0.82;
  animation: outline-secondary-breath 8.4s ease-in-out infinite;
}

.figure__earth-aura {
  position: absolute;
  inset: -30%;
  pointer-events: none;
  z-index: 1;
  opacity: 0.78;
  filter: blur(42px) saturate(1.08);
  mix-blend-mode: soft-light;
  background:
    radial-gradient(circle at 48% 32%, hsla(26 52% 26% / 0.85) 0%, hsla(26 52% 10% / 0) 74%),
    radial-gradient(circle at 58% 72%, hsla(12 58% 18% / 0.55) 0%, transparent 76%);
  -webkit-mask: var(--figure-mask) center / contain no-repeat;
  mask: var(--figure-mask) center / contain no-repeat;
  animation: earth-aura-cycle 26s ease-in-out infinite;
  transition: opacity 0.8s ease, filter 0.8s ease, background 1.2s ease;
}

.chakra {
  position: absolute;
  inset: auto;
  width: clamp(12px, 2.3vmin, 18px);
  height: clamp(12px, 2.3vmin, 18px);
  border-radius: 999px;
  pointer-events: none;
  z-index: 4;
  background: radial-gradient(circle at center, hsl(var(--chakra-third-eye) / 0.95) 0%, hsl(var(--chakra-third-eye) / 0.78) 55%, hsla(var(--chakra-third-eye) / 0) 100%);
  box-shadow: 0 0 1.2rem hsla(var(--chakra-third-eye) / 0.68), 0 0 2.8rem hsla(var(--chakra-third-eye) / 0.24);
}

.chakra::after {
  content: "";
  position: absolute;
  inset: -40%;
  border-radius: inherit;
  background: radial-gradient(circle at center, hsla(var(--chakra-third-eye) / 0.5) 0%, hsla(var(--chakra-third-eye) / 0.08) 55%, transparent 100%);
  filter: blur(4px);
  opacity: 0.75;
}

.chakra--third-eye {
  top: 20%;
  left: 50%;
  transform: translate(-50%, -50%);
  animation: chakra-breath 4.8s ease-in-out infinite;
}

.figure .aura--leaves,
.figure .chakra,
.figure__outline {
  transition: opacity 0.6s ease, visibility 0.6s ease;
}

.figure:not(.is-chakra-active) .aura--leaves,
.figure:not(.is-chakra-active) .chakra {
  opacity: 0;
  visibility: hidden;
}

.figure:not(.is-chakra-active) .aura--leaves,
.figure:not(.is-chakra-active) .aura--leaves *,
.figure:not(.is-chakra-active) .chakra {
  animation-play-state: paused;
}

.figure.is-chakra-active .aura--leaves,
.figure.is-chakra-active .chakra,
.figure.is-chakra-active .figure__outline {
  opacity: 1;
  visibility: visible;
}

.figure.is-chakra-active .aura--leaves,
.figure.is-chakra-active .aura--leaves *,
.figure.is-chakra-active .chakra,
.figure.is-chakra-active .figure__outline {
  animation-play-state: running;
}

.figure.is-chakra-active .chakra {
  opacity: 0;
  visibility: hidden;
}

.figure.is-chakra-active .figure__earth-aura {
  opacity: 0.6;
}

.aura {
  position: absolute;
  inset: -26%;
  pointer-events: none;
  z-index: 1;
  opacity: 0;
  filter: blur(9px);
  -webkit-mask-image: radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.95) 72%, transparent 100%);
  mask-image: radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.95) 72%, transparent 100%);
}

@keyframes outline-breath {
  0%,
  100% {
    opacity: 0.6;
    transform: scale(0.97);
  }
  45% {
    opacity: 0.85;
    transform: scale(1.06);
  }
  70% {
    opacity: 0.72;
    transform: scale(1.02);
  }
}

@keyframes outline-secondary-breath {
  0%,
  100% {
    opacity: 0.45;
    transform: scale(1.02);
  }
  42% {
    opacity: 0.74;
    transform: scale(1.08);
  }
  68% {
    opacity: 0.6;
    transform: scale(1.04);
  }
}

@keyframes chakra-breath {
  0%,
  100% {
    transform: translate(-50%, -50%) scale(0.85);
    box-shadow: 0 0 0.72rem hsla(var(--chakra-third-eye) / 0.58), 0 0 2rem hsla(var(--chakra-third-eye) / 0.18);
  }
  42% {
    transform: translate(-50%, -50%) scale(1.08);
    box-shadow: 0 0 1.4rem hsla(var(--chakra-third-eye) / 0.7), 0 0 3rem hsla(var(--chakra-third-eye) / 0.3);
  }
  68% {
    transform: translate(-50%, -50%) scale(0.94);
    box-shadow: 0 0 1rem hsla(var(--chakra-third-eye) / 0.64), 0 0 2.4rem hsla(var(--chakra-third-eye) / 0.24);
  }
}

.stage::after,
.figure__outline--secondary,
.figure__outline--primary {
  will-change: transform, opacity;
}

/* Ambient breathing haze */
.aura--leaves {
  animation: haze-breathe 18s ease-in-out infinite;
}

.aura--leaves::after {
  content: "";
  position: absolute;
  inset: -22%;
  background:
    radial-gradient(circle at 25% 65%, hsla(var(--ambient-color-1) / 0.35) 0%, transparent 58%),
    radial-gradient(circle at 72% 60%, hsla(var(--ambient-color-2) / 0.28) 0%, transparent 62%),
    radial-gradient(circle at 48% 32%, hsla(var(--ambient-color-3) / 0.22) 0%, transparent 68%);
  filter: blur(16px);
  opacity: 0.65;
  mix-blend-mode: screen;
  animation: haze-sparkle 22s ease-in-out infinite;
  -webkit-mask-image: radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.94) 65%, transparent 100%);
  mask-image: radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.94) 65%, transparent 100%);
}

.leaf {
  position: absolute;
  top: 50%;
  left: 50%;
  width: clamp(2.4rem, 8vmin, 4.8rem);
  height: clamp(2.4rem, 8vmin, 4.8rem);
  border-radius: 50%;
  background: radial-gradient(
    circle at 50% 50%,
    hsla(var(--particle-hsl, var(--ambient-color-2)) / 0.66) 0%,
    hsla(var(--particle-hsl, var(--ambient-color-2)) / 0.08) 70%
  );
  opacity: 0;
  filter: blur(22px) saturate(1.2);
  transform: translate(-50%, -50%) scale(calc(var(--particle-scale, 1) * 0.7));
  animation: particle-breathe var(--particle-duration, 18s) ease-in-out infinite;
  animation-delay: var(--particle-delay, 0s);
}

.leaf::after {
  content: "";
  position: absolute;
  inset: 18% 18% 18% 18%;
  border-radius: 50%;
  background: hsla(var(--particle-hsl, var(--ambient-color-2)) / 0.24);
  filter: blur(6px);
}

@keyframes haze-breathe {
  0%,
  100% {
    opacity: 0.58;
    transform: scale(0.9);
  }
  45% {
    opacity: 0.95;
    transform: scale(1.12);
  }
  65% {
    opacity: 0.72;
    transform: scale(1.04);
  }
}

@keyframes haze-sparkle {
  0%,
  100% {
    opacity: 0.42;
    transform: scale(0.94);
  }
  40% {
    opacity: 0.78;
    transform: scale(1.12);
  }
  70% {
    opacity: 0.6;
    transform: scale(1.06);
  }
}

@keyframes particle-breathe {
  0% {
    opacity: 0;
    transform: translate(
        calc(-50% + var(--drift-start-x, 0%)),
        calc(-50% + var(--drift-start-y, 0%))
      )
      scale(calc(var(--particle-scale, 1) * 0.6));
  }
  40% {
    opacity: 0.58;
  }
  52% {
    opacity: 0.85;
    transform: translate(
        calc(-50% + var(--drift-mid-x, 0%)),
        calc(-50% + var(--drift-mid-y, 0%))
      )
      scale(calc(var(--particle-scale, 1) * 1.08));
  }
  100% {
    opacity: 0;
    transform: translate(
        calc(-50% + var(--drift-end-x, 0%)),
        calc(-50% + var(--drift-end-y, 0%))
      )
      scale(calc(var(--particle-scale, 1) * 0.75));
  }
}

@keyframes beam-breathe {
  0%,
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.7);
  }
  38% {
    opacity: 0.68;
  }
  52% {
    opacity: 0.88;
    transform: translate(-50%, -50%) scale(1.15);
  }
  76% {
    opacity: 0.46;
  }
}

@keyframes figure-aura-breathe {
  0%,
  100% {
    transform: translate(-50%, -50%) scale(0.88);
    opacity: 0.64;
  }
  44% {
    transform: translate(-50%, -50%) scale(1.04);
    opacity: 0.86;
  }
  68% {
    transform: translate(-50%, -50%) scale(0.95);
    opacity: 0.74;
  }
}

@keyframes stage-contrast-breathe {
  0%,
  100% {
    opacity: 0.42;
    transform: translate(-50%, -48%) scale(1.08);
  }
  46% {
    opacity: 0.68;
    transform: translate(-50%, -48%) scale(1.14);
  }
  72% {
    opacity: 0.55;
    transform: translate(-50%, -48%) scale(1.12);
  }
}

@media (prefers-reduced-motion: reduce) {
  .aura,
  .figure__outline,
  .leaf,
  .chakra,
  .stage::after {
    animation: none !important;
    opacity: 0 !important;
  }

  .figure,
  .figure__image {
    transition: none !important;
  }
}
