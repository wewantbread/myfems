/* Reset-ish */
* {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  margin: 0;
  padding: 0;
}

.sacred-body {
  background:#000;
  color:#fff;
  min-height:100vh;
  overflow:hidden;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, Inter, Roboto, "Helvetica Neue", sans-serif;
}

/* MAIN SECTION WRAPPER */
.sacred-hero {
  position: relative;
  height: 100dvh;
  width: 100%;
  background: #000;
  overflow: hidden;
  isolation: isolate; /* lets blend modes behave right */
  color: #fff;
}

/* center stack */
.meditator-wrapper {
  position: absolute;
  inset: 0;
  margin: auto;
  height: min(80vmin, 90%);
  width: auto;
  max-width: min(80vmin, 90%);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 3; /* above bg + kaleido */
  pointer-events: none;
}

/* ============ */
/* OUTLINE DRAW */
/* ============ */

.outline-draw {
  position: absolute;
  inset: 0;
  margin: auto;
  height: 100%;
  width: 100%;
  /* glow while it draws */
  filter:
    drop-shadow(0 0 1.2rem rgba(255,255,255,.6))
    drop-shadow(0 0 2.5rem rgba(255,255,255,.35));
  opacity: 1;
  z-index: 2;
}

.outline-draw path {
  stroke: rgba(255,255,255,.8);
  stroke-width: 2;
  stroke-linecap: round;
  stroke-linejoin: round;

  /* "fuse lighting up" by animating dashoffset */
  stroke-dasharray: 2600;
  stroke-dashoffset: 2600;

  animation:
    drawOutline 2s linear forwards,
    outlineGlow 2s ease-in-out forwards;
}

/* draws head-to-tail */
@keyframes drawOutline {
  to {
    stroke-dashoffset: 0;
  }
}

/* make glow calm down a bit after draw */
@keyframes outlineGlow {
  0% {
    filter:
      drop-shadow(0 0 1.5rem rgba(255,255,255,1))
      drop-shadow(0 0 3rem rgba(255,255,255,.8));
  }
  100% {
    filter:
      drop-shadow(0 0 1rem rgba(255,255,255,.45))
      drop-shadow(0 0 2rem rgba(255,255,255,.25));
  }
}

/* ===================== */
/* CHAKRA IMAGE FADE-IN */
/* ===================== */

.chakra-img {
  position: relative;
  max-height: 100%;
  max-width: 100%;
  object-fit: contain;
  filter:
    drop-shadow(0 0 .9rem rgba(255,255,255,.4))
    drop-shadow(0 0 2rem rgba(255,255,255,.2));
  opacity: 0;
  animation: chakraFade 1s ease forwards;
  animation-delay: 2s; /* after outline draw finishes */
  z-index: 3;
}

@keyframes chakraFade {
  to { opacity: 1; }
}

/* ======================================= */
/* RADIAL BACKGROUND GLOW (fades in later) */
/* ======================================= */

.bg-fade {
  position:absolute;
  inset:0;
  background: radial-gradient(
    120vmax 100vmax at 50% 60%,
    rgba(0,0,0,.65) 0%,
    #000 70%
  );
  opacity:0;
  animation: bgIn 2s ease forwards;
  animation-delay: 2s; /* sync with chakra image */
  z-index:0;
}

@keyframes bgIn {
  to { opacity:1; }
}

/* ======================================= */
/* SPINNING MANTRA / KALEIDOSCOPE LAYERS   */
/* ======================================= */

.kaleido,
.kaleido::before,
.kaleido::after {
  content:"";
  position:absolute;
  inset:-30vmax; /* overscan so edges are offscreen */
  pointer-events:none;
  z-index:1;
  opacity:0; /* start hidden, fade in w/ kaleidoAppear */
}

/* base spinning texture */
.kaleido {
  background:
    /* subtle spokes */
    repeating-conic-gradient(from 0deg,
      rgba(255,255,255,.08) 0 6deg,
      transparent 6deg 12deg),
    /* faint rings */
    repeating-radial-gradient(circle at 50% 50%,
      rgba(255,255,255,.06) 0 12px,
      transparent 12px 24px);

  filter: grayscale(1) blur(18px) contrast(125%) brightness(90%);
  animation:
    kaleidoAppear 2s ease forwards 2s,
    spin 80s linear infinite;
  /* feather edges into darkness */
  -webkit-mask: radial-gradient(120vmax 120vmax at 50% 60%, #000 35%, transparent 80%);
          mask: radial-gradient(120vmax 120vmax at 50% 60%, #000 35%, transparent 80%);
}

/* extra spokes, slow reverse spin */
.kaleido::before {
  background:
    repeating-conic-gradient(from 45deg,
      rgba(255,255,255,.06) 0 8deg,
      transparent 8deg 16deg),
    radial-gradient(ellipse at 50% 50%,
      rgba(255,255,255,.04),
      transparent 60%);
  mix-blend-mode: screen;
  animation:
    kaleidoAppear 2s ease forwards 2s,
    spin 120s linear infinite reverse;
}

/* fine filament layer, ultra slow */
.kaleido::after {
  background:
    repeating-conic-gradient(from 22.5deg,
      rgba(255,255,255,.05) 0 4deg,
      transparent 4deg 8deg);
  mix-blend-mode: screen;
  animation:
    kaleidoAppear 2s ease forwards 2s,
    spin 200s linear infinite;
}

/* fade in after outline finishes */
@keyframes kaleidoAppear {
  to { opacity:.55; }
}

/* slow rotation */
@keyframes spin {
  to { transform: rotate(360deg); }
}

/* =============================== */
/* ACCESSIBILITY (reduced motion)  */
/* =============================== */
@media (prefers-reduced-motion: reduce){
  .outline-draw path{
    animation: none;
    stroke-dashoffset: 0;
  }
  .bg-fade,
  .kaleido,
  .kaleido::before,
  .kaleido::after,
  .chakra-img{
    animation: none;
    opacity:1;
  }
}