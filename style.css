/* ================ */
/* LAYOUT CONTAINER */
/* ================ */

.sacred-hero {
  position: relative;
  height: 100dvh;
  width: 100%;
  background: #000;            /* start pure black */
  overflow: hidden;
  color: #fff;
  isolation: isolate;          /* helps blending behave */
}

/* center stack */
.meditator-wrapper {
  position: absolute;
  inset: 0;
  margin: auto;
  height: min(80vmin, 90%);
  width: auto;
  max-width: min(80vmin, 90%);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 3; /* above bg + kaleido */
  pointer-events: none;
}

/* ============================= */
/* 1. OUTLINE "WIRE LIGHTING UP" */
/* ============================= */

/* this svg sits on top initially, draws the outline stroke */
.outline-draw {
  position: absolute;
  inset: 0;
  margin: auto;
  height: 100%;
  width: 100%;
  /* subtle glow */
  filter: drop-shadow(0 0 1.2rem rgba(255,255,255,.6))
          drop-shadow(0 0 2.5rem rgba(255,255,255,.35));
  opacity: 1;
  z-index: 2;
}

.outline-draw path {
  stroke: rgba(255,255,255,.8);
  stroke-width: 2;
  stroke-linecap: round;
  stroke-linejoin: round;

  /* the "fuse lighting up" trick */
  stroke-dasharray: 2600;
  stroke-dashoffset: 2600;

  animation:
    drawOutline 2s linear forwards,
    outlineGlow 2s ease-in-out forwards;
}

/* draws stroke head-to-tail */
@keyframes drawOutline {
  to {
    stroke-dashoffset: 0;
  }
}

/* glow tapers slightly so it doesn't stay too harsh */
@keyframes outlineGlow {
  0% {
    filter: drop-shadow(0 0 1.5rem rgba(255,255,255,1))
            drop-shadow(0 0 3rem rgba(255,255,255,.8));
  }
  100% {
    filter: drop-shadow(0 0 1rem rgba(255,255,255,.45))
            drop-shadow(0 0 2rem rgba(255,255,255,.25));
  }
}

/* ============================= */
/* 2. CHAKRA IMAGE FADE-IN       */
/* ============================= */

/* chakra.png (the final glowing lady w/ chakra orbs) */
.chakra-img {
  position: relative;
  max-height: 100%;
  max-width: 100%;
  object-fit: contain;
  filter: drop-shadow(0 0 .9rem rgba(255,255,255,.4))
          drop-shadow(0 0 2rem rgba(255,255,255,.2));
  opacity: 0;
  animation: chakraFade 1s ease forwards;
  animation-delay: 2s; /* wait until outline finishes drawing */
  z-index: 3;
}

@keyframes chakraFade {
  to {
    opacity: 1;
  }
}

/* =================================================== */
/* 3. SOFT RADIAL BG GLOW (FADES IN AFTER OUTLINE)     */
/* =================================================== */

.bg-fade{
  position:absolute;
  inset:0;
  background: radial-gradient(
    120vmax 100vmax at 50% 60%,
    rgba(0,0,0,.65) 0%,
    #000 70%
  );
  opacity:0;
  animation: bgIn 2s ease forwards;
  animation-delay: 2s; /* start after outline finishes */
  z-index:0;
}

@keyframes bgIn{
  to { opacity:1; }
}

/* =================================================== */
/* 4. SPINNING KALEIDOSCOPE / MANTRA BEHIND FIGURE     */
/* =================================================== */

.kaleido,
.kaleido::before,
.kaleido::after{
  content:"";
  position:absolute;
  inset:-30vmax; /* overscan so no hard edges show */
  pointer-events:none;
  z-index:1;
  opacity:0; /* will fade in via animation below */
}

/* base spinning mandala texture */
.kaleido{
  background:
    /* subtle spokes */
    repeating-conic-gradient(from 0deg,
      rgba(255,255,255,.08) 0 6deg,
      transparent 6deg 12deg),
    /* faint rings */
    repeating-radial-gradient(circle at 50% 50%,
      rgba(255,255,255,.06) 0 12px,
      transparent 12px 24px);

  filter: grayscale(1) blur(18px) contrast(125%) brightness(90%);
  animation:
    kaleidoAppear 2s ease forwards 2s,
    spin 80s linear infinite;
  /* soften edges into the void */
  -webkit-mask: radial-gradient(120vmax 120vmax at 50% 60%, #000 35%, transparent 80%);
          mask: radial-gradient(120vmax 120vmax at 50% 60%, #000 35%, transparent 80%);
}

/* extra layered spokes, slower reverse spin */
.kaleido::before{
  background:
    repeating-conic-gradient(from 45deg,
      rgba(255,255,255,.06) 0 8deg,
      transparent 8deg 16deg),
    radial-gradient(ellipse at 50% 50%,
      rgba(255,255,255,.04), transparent 60%);
  mix-blend-mode: screen;
  animation:
    kaleidoAppear 2s ease forwards 2s,
    spin 120s linear infinite reverse;
}

/* fine filament layer, ultra slow */
.kaleido::after{
  background:
    repeating-conic-gradient(from 22.5deg,
      rgba(255,255,255,.05) 0 4deg,
      transparent 4deg 8deg);
  mix-blend-mode: screen;
  animation:
    kaleidoAppear 2s ease forwards 2s,
    spin 200s linear infinite;
}

/* fade in the mantra spinner AFTER outline draw (2s delay above) */
@keyframes kaleidoAppear{
  to { opacity:.55; }
}

/* global spin */
@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ==================================== */
/* ACCESSIBILITY: REDUCE MOTION RESPECT */
/* ==================================== */
@media (prefers-reduced-motion: reduce){
  .outline-draw path{
    animation: none;
    stroke-dashoffset: 0;
  }
  .bg-fade,
  .kaleido,
  .kaleido::before,
  .kaleido::after,
  .chakra-img{
    animation: none;
    opacity:1;
  }
}
